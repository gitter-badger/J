language: php

php:
- 5.3
- 5.4
- 5.5
- 5.6
- hhvm

addons:
  code_climate:
    repo_token:
      secure: "GsObMbK+/X5KUE+tbpE+upR3us3IVYXKbx/ZRSLJJwE4lOJHGBuojVAP/LGe3CV+y4MK2ruWVZLnV3gB8wJZIfJzigOjisX8UbVk7eyofXOHW3qQeB6Nu6jx5f1+iEzHJJv9xymLuHdtALVIVm0XjcaBtnju6ThWvSC5GugkRo4="

before_script:
- COMPOSER_ROOT_VERSION=dev-master
- composer self-update
- composer install
- mkdir -p build/logs

script:
- phpunit --coverage-clover build/logs/clover.xml

after_script:
  - php vendor/bin/coveralls
  - php vendor/bin/test-reporter --stdout > codeclimate.json
  - 'curl -X POST -d @codeclimate.json -H "Content-Type: application/json" -H "User-Agent: Code Climate (PHP Test Reporter v1.0.1-dev)"  https://codeclimate.com/test_reports'
